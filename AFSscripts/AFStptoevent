getgenv().TpToEventStatement = true
getgenv().AmountOfAccounts = 4
if not getgenv().TpToEventStatement or game.PlaceId ~= 16946008847 then return end
repeat task.wait() until game:IsLoaded()

-- Ожидание загрузки всех аккаунтов
while #game:GetService("Players"):GetPlayers() ~= getgenv().AmountOfAccounts do
    task.wait(1)
    print("Waiting till other alts join")
end

local function activatePortal()
    local character = game:GetService("Players").LocalPlayer.Character
    if not character then return false end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return false end
    
    -- Телепортация к порталу
    humanoidRootPart.CFrame = CFrame.new(-10, 256.6, -112)
    task.wait(1)
    if game:GetService("Players").LocalPlayer.Name == "edik899" then
        local args = {
        	"PlayBlackCloverEvent"
        }
        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("RemoteEvent"):FireServer(unpack(args))
    end
    -- Поиск ProximityPrompt у портала
    for _, descendant in pairs(workspace:GetDescendants()) do
        if descendant:IsA("ProximityPrompt") and (descendant.Parent.Position - humanoidRootPart.Position).Magnitude < 10 then
            fireproximityprompt(descendant)
            print("ProximityPrompt activated!")
            return true
        end
    end
    
    return false
end

while task.wait(1) do
    if #game:GetService("Workspace").Characters:GetChildren() == AmountOfAccounts then
        local success = activatePortal()
        if success then
            print("Portal activation successful!")
            break -- Выход из цикла после успешной активации
        else
            print("Failed to activate portal, retrying...")
        end
    end
end
